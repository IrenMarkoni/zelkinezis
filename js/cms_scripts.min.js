jQuery(document).ready(function(e){function o(e,o,s){var t=o[0];return t.cms_fio.value&&t.cms_phone.value?void 0:(swal("Внимание!","Пожалуйста заполните имя и телефон!","warning"),!1)}function s(e,o,s){var t=o[0];return t.cms_name.value&&t.cms_phone.value?void 0:(swal("Внимание!","Пожалуйста заполните все поля!","warning"),!1)}e("#in_page_review_form").submit(function(){return e(this).ajaxSubmit({data:{new_reviews:1},clearForm:!0,success:function(e){e.indexOf("error")+1?sweetAlert("Упс!","Вы не верно заполнили капчу. попробуйте ещё раз","error"):swal("Поздравляем!","Ваш отзыв отправлен на модерацию!","success")}}),!1}),e("#in_page_comments_form").submit(function(){var o=window.location.pathname;return e(this).ajaxSubmit({data:{new_comments:1,url:o},target:"#comment_result"}),!1});var t=e.cookie("order_goods");if(null==t)e("#cms_cart_amount").html("0");else{for(var a=t.split("|"),r=0,c=0,i=0;i<a.length-1;i++)new_array=a[i].split(":"),one_amount=new_array[1],price=new_array[2],one_summ=parseFloat(price)*parseFloat(one_amount),r+=parseFloat(one_amount),c+=one_summ;e("#cms_cart_summ").html(c),e("#cms_cart_amount").html(r)}e(".cms_buy_btn").on("click",function(o){o.preventDefault();var s=e(this).attr("data-id-good"),t=e(".cms_amount_"+s).val(),a=e("#cms_cart_amount").html();t||(t="1");var r=parseFloat(a)+parseFloat(t),c=e(".cms_price_"+s).html(),i=e("#cms_cart_summ").html(),n=parseFloat(t)*parseFloat(c),l=parseFloat(i)+n;e("#cms_cart_amount").html(r),e("#cms_cart_summ").html(l);var m=e.cookie("order_goods");if(null==m)var _=new Array;else var _=m.split("|");for(var u=0,p=new Array,d=new Array,h=0;h<_.length;h++){var v=_[h].split(":");p[h]=v[0],d[h]=v[1],v[0]==s&&(u++,d[h]=parseFloat(d[h])+parseFloat(t))}if(0==u){if(null==m)var f=s+":"+t+":"+c+"|";else var f=m+s+":"+t+":"+c+"|";e.cookie("order_goods",f,{expires:30,path:"/"})}else{for(var b="",h=0;h<p.length-1;h++)b=b+p[h]+":"+d[h]+":"+c+"|";e.cookie("order_goods",b,{expires:30,path:"/"})}e("#cms_success_alert").show(),e("#cms_success_alert").addClass("animated bounceInUp"),setTimeout(function(){e("#cms_success_alert").removeClass("bounceInUp"),e("#cms_success_alert").addClass("bounceOutUp"),setTimeout(function(){e("#cms_success_alert").removeClass("animated bounceOutUp"),e("#cms_success_alert").hide()},1e3)},1500)}),e(".cms_price").on("click",function(){var o=e(this).attr("data-id-price"),s=e(this).val();e(".cms_buy_price_btn").attr("data-id-price",o),e(".cms_buy_price_btn").attr("data-price",s)}),e(".cms_price").each(function(o,s){if(e(this).prop("checked")){var t=e(this).attr("data-id-price"),a=e(this).val();e(".cms_buy_price_btn").attr("data-id-price",t),e(".cms_buy_price_btn").attr("data-price",a)}}),e(".cms_buy_price_btn").on("click",function(o){o.preventDefault();var s=e(this).attr("data-id-good"),t=(e(this).attr("data-id-price"),e(".cms_amount").val()),a=e("#cms_cart_amount").html();t||(t="1");var r=parseFloat(a)+parseFloat(t),c=e(this).attr("data-price"),i=e("#cms_cart_summ").html(),n=parseFloat(t)*parseFloat(c),l=parseFloat(i)+n;e("#cms_cart_amount").html(r),e("#cms_cart_summ").html(l);var m=e.cookie("order_goods");if(null==m)var _=new Array;else var _=m.split("|");for(var u=0,p=new Array,d=new Array,h=new Array,v=0;v<_.length;v++){var f=_[v].split(":");p[v]=f[0],d[v]=f[1],h[v]=f[2],f[0]==s&&f[2]==c&&(u++,d[v]=parseFloat(d[v])+parseFloat(t))}if(0==u){if(null==m)var b=s+":"+t+":"+c+"|";else var b=m+s+":"+t+":"+c+"|";e.cookie("order_goods",b,{expires:30,path:"/"})}else{for(var k="",v=0;v<p.length-1;v++)k=k+p[v]+":"+d[v]+":"+h[v]+"|";e.cookie("order_goods",k,{expires:30,path:"/"})}e("#cms_success_alert").show(),e("#cms_success_alert").addClass("animated bounceInUp"),setTimeout(function(){e("#cms_success_alert").removeClass("bounceInUp"),e("#cms_success_alert").addClass("bounceOutUp"),setTimeout(function(){e("#cms_success_alert").removeClass("animated bounceOutUp"),e("#cms_success_alert").hide()},1e3)},1500)}),e("#cms_clear_cart").on("click",function(o){o.preventDefault(),e.removeCookie("order_goods",{path:"/"}),location.reload()}),e("#cms_resumm").on("click",function(o){o.preventDefault();var s="";e(".cms_cart_ammount").each(function(){var o=e(this).val(),t=e(this).attr("data-id-good"),a=e(this).attr("data-id-price"),r=t+":"+o+":"+a+"|";s+=r}),e.cookie("order_goods",s,{expires:30,path:"/"}),location.reload()}),e(".cms_delete_from_cart").on("click",function(o){if(o.preventDefault(),confirm("Вы действительно хотите удалить товар из корзины?")){for(var s=e(this).attr("data-id-good"),t=e.cookie("order_goods"),a=t.split("|"),r=0;r<a.length-1;r++){new_array=a[r].split(":");var c=new_array[0];s==c&&a.splice(r,1)}for(var i="",r=0;r<a.length-1;r++)i=i+a[r]+"|";console.log(i),0==i.length?e.removeCookie("order_goods",{path:"/"}):e.cookie("order_goods",i,{expires:30,path:"/"}),location.reload()}}),e("#cms_order_block").css("display","none"),e("#cms_result_block").css("display","none"),e("#cms_go_to_order").click(function(o){o.preventDefault(),e("#cms_cart_block").css("display","none"),e("#cms_order_block").css("display","block")}),e("#cms_go_to_cart").click(function(o){o.preventDefault(),e("#cms_cart_block").css("display","block"),e("#cms_order_block").css("display","none")}),e("#cms_cart_form").submit(function(){return e(this).ajaxSubmit({data:{new_order:1},beforeSubmit:o,success:function(){e("#cms_cart_block").hide("slow"),e("#cms_order_block").hide("slow"),e("#cms_result_block").show("slow"),e.removeCookie("order_goods",{path:"/"}),e("#cms_cart_amount").html(0),e("#cms_cart_summ").html(0)}}),!1}),e(".cms_click_buy_btn").on("click",function(o){var t=e(this).attr("data-id-good");o.preventDefault(),e("#click_buy_modal").modal({backdrop:"static",keyboard:!0}),e("#submit_click_buy").on("click",function(o){o.preventDefault(),e("#click_buy_form").ajaxSubmit({beforeSubmit:s,data:{click_buy_form:1,good_id:t},target:".result_message"})})}),e("#cms_phone").mask("+7 (999) 999-99-99"),e("#in_good_review_form").submit(function(){return e(this).ajaxSubmit({data:{new_shop_reviews:1},target:"#review_result"}),!1});var n=e.cookie("comparison_goods");if(null==n)e("#cms_comparison_result").empty(),e("#cms_comparison_result").append("0"),e("#cms_comparison_link").hide(),e("#cms_clear_comparison").hide(),e("#cms_comparison_block").hide();else{var l=n.split(";"),m=l.length-1;e("#cms_comparison_result").empty(),e("#cms_comparison_result").append(m),e("#cms_comparison_link").show(),e("#cms_comparison_block").show()}e("#cms_clear_comparison").on("click",function(o){o.preventDefault(),confirm("Вы действительно хотите удалить все товары из сравнения?")&&(e.removeCookie("comparison_goods",{path:"/"}),location.reload())}),e(".cms_comparison_btn").on("click",function(o){o.preventDefault();var s=e(this).attr("data-id-good"),t=e.cookie("comparison_goods");if(null==t){c=s+";",e.cookie("comparison_goods",c,{expires:30,path:"/"});var a=e("#cms_comparison_result").html();a=parseInt(a)+1,e("#cms_comparison_result").html(a),console.log(c),e("#cms_comparison_link").show("slow"),e("#cms_clear_comparison").show("slow"),e("#cms_comparison_block").show("slow")}else{for(var r=t.split(";"),c="",i=1,n=0;n<r.length;n++)if(s==r[n])var i=0;if(0==i)swal("Внимание!","Вы уже добавили этот товар для сравнения!","warning");else{var a=e("#cms_comparison_result").html();a=parseInt(a)+1,e("#cms_comparison_result").html(a),c=t+s+";",e.cookie("comparison_goods",c,{expires:30,path:"/"})}var l=e.cookie("comparison_goods");console.log(l)}}),e(".cms_contact_form").submit(function(){var o=e(this).find("button"),s=o.text();return o.text("Отправка"),o.attr("disabled","disabled"),e(this).ajaxSubmit({data:{submit_contact_form:1},success:function(e){e.indexOf("error")+1?(o.removeAttr("disabled"),o.text(s),sweetAlert("Упс!","Вы не верно заполнили капчу. попробуйте ещё раз","error")):(o.removeAttr("disabled"),o.text(s),swal("Поздравляем!","Ваша заявка успешно отправлена!","success"))}}),!1})});